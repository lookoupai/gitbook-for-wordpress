# 《求和!李姐万岁! GitBook For WordPress》

GitBook For WordPress

求和! 李姐万岁! 这是一个**GitBook布局，锤子便签风格**的WordPress主题~

原主题来源：[@zhaoolee/gitbook-for-wordpress](https://github.com/zhaoolee/gitbook-for-wordpress)

## 主要功能

### 原有功能

1. 无需像GitBook一样定制目录, 侧边栏按时间倒序显示已发布文章
2. 侧边栏自动将当前文章滚动到侧边栏顶部
3. 支持按照专题过滤文章列表
4. 支持宽窄屏自适应
5. 支持锤子便签风格的评论
6. 支持搜索
7. 底部预留备案号位置，支持自定义，不填就不显示
8. 支持显示后台菜单
9. 支持小部件

### 新增功能

1. 前台用户系统
   - 用户登录：支持用户名/邮箱登录，记住登录状态
   - 用户注册：支持新用户注册，自动验证邮箱
   - 密码找回：支持通过邮箱重置密码
   - 用户中心：集中管理用户相关功能

2. Markdown 支持
   - 评论支持 Markdown：支持粗体、斜体、代码、链接等格式
   - 实时预览：编写评论时可实时预览 Markdown 效果
   - Vditor 编辑器：提供专业的 Markdown 编辑体验
   - 图片上传：支持图片链接插入和描述
   - 实时渲染：所有 Markdown 内容自动渲染

3. 用户中心功能
   - 个人资料：修改显示名称、邮箱、个人简介等
   - 文章管理：查看、编辑自己发布的文章
   - 评论管理：查看、编辑自己发表的评论
   - 收藏功能：收藏感兴趣的文章
   - 消息通知：系统通知、评论回复等提醒
   - AI审核历史：查看个人文章的AI审核结果

4. 文章标签页
   - 多标签文章列表：最新文章、最近修改、热门文章等
   - 自定义标签：支持添加自定义标签和RSS内容
   - 缓存机制：优化加载性能，减轻服务器负担
   - 响应式设计：完美适配移动端显示
   - 标签排序：支持拖拽调整标签显示顺序
   - 后台设置：可配置显示数量、缓存时间等
   - 权限控制：支持为自定义标签设置访问权限
   - 统一样式：所有标签页文章标题保持一致的加粗样式
   - 友好URL：支持 /tabs/tag-name/ 格式的URL结构
   - 首页支持：可设置为首页并保持URL结构
   - 权限跳转：未登录访问受限标签自动跳转登录
   - 返回功能：登录后自动返回原来的标签页

5. AI内容审核系统
   - 自动审核：新文章和修改自动进行AI质量评估
   - 质量评分：对内容进行1-10分的质量打分
   - 详细反馈：提供具体的内容改进建议
   - 自动批准：可设置达到分数阈值自动批准内容
   - 管理界面：专门的AI审核管理页面
   - 用户反馈：在用户中心显示AI审核结果
   - 手动触发：支持管理员手动触发AI审核
   - 内容比对：支持文章修订版本的内容对比
   - 可配置性：灵活的审核标准和阈值设置

## 使用说明

### 主题安装

1. 下载主题文件
2. 上传到 WordPress 主题目录：`wp-content/themes/`
3. 在后台启用主题
4. 主题会自动创建必要的页面（登录、注册、用户中心等）

### 用户系统配置

1. 确保 WordPress 允许用户注册：
   - 进入 设置 > 常规
   - 勾选"任何人都可以注册"
   - 选择新用户的默认角色（推荐设置为"订阅者"）

2. 配置邮件发送：
   - 建议安装 SMTP 插件以确保邮件正常发送
   - 配置发件邮箱信息
   - 测试邮件发送功能

### 文章标签页配置

1. 创建标签页：
   - 新建页面并选择"文章标签页"模板
   - 可设置为首页（保持干净的URL）或普通页面
   - 支持 /tabs/tag-name/ 格式的永久链接

2. 后台设置：
   - 进入 外观 > 文章标签页
   - 配置每页显示数量和摘要长度
   - 设置不同类型内容的缓存时间
   - 添加/管理自定义标签和RSS内容
   - 为自定义标签设置访问权限（是否需要登录可见）
   - 通过拖拽调整标签显示顺序
   - 排序设置自动保存并即时生效

3. RSS内容展示：
   - 安装RSS聚合插件
   - 在自定义标签中填写RSS短代码
   - 支持多个RSS源

4. 权限控制：
   - 可为每个自定义标签单独设置访问权限
   - 未登录用户看不到需要登录的标签
   - 已登录用户可以看到所有标签
   - 权限设置即时生效

### AI内容审核配置

1. 安装依赖插件：
   - 安装 [AI Services](https://wordpress.org/plugins/ai-services/) 插件
   - 在插件设置中配置API密钥（支持Google Gemini、OpenAI等）

2. 配置审核设置：
   - 进入 设置 > AI审核设置
   - 启用或禁用AI审核功能
   - 设置最低通过分数（1-10分）
   - 选择是否自动批准达到分数的内容
   - 配置审核提示词和评估标准

3. 创建审核页面：
   - 新建页面并选择"AI审核页面"模板
   - 设置适当的页面权限（建议仅管理员可见）
   - 访问此页面可查看所有待审核内容

4. 使用方法：
   - 新文章提交后自动进行AI审核
   - 用户可在用户中心查看自己文章的审核状态
   - 管理员可在AI审核页面手动触发审核
   - 达到设定分数的内容可自动批准或等待手动批准

### 用户权限设置

1. 文章权限：
   - 普通用户只能查看和编辑自己的文章
   - 管理员可以查看和编辑所有文章

2. 评论权限：
   - 用户可以编辑自己的评论
   - 评论修改后需要重新审核
   - 管理员可以直接编辑和删除任何评论

3. 审核权限：
   - 普通用户只能查看自己内容的审核结果
   - 管理员可以查看和管理所有审核内容
   - 只有管理员可以手动批准或拒绝内容

### Markdown 使用

1. 评论支持的 Markdown 语法：
   - **粗体**：`**文本**`
   - *斜体*：`*文本*`
   - `代码`：`` `代码` ``
   - 代码块：` ```代码块``` `
   - [链接](url)：`[文本](url)`
   - > 引用：`> 引用文本`

2. 工具栏按钮：
   - B：插入粗体
   - I：插入斜体
   - Code：插入行内代码
   - CodeBlock：插入代码块
   - Link：插入链接
   - Quote：插入引用

## 示例网站

方圆小站 https://fangyuanxiaozhan.com

## 开发说明

如果你像zhaoolee一样不想写富文本，只想用Markdown，可以使用zhaoolee的另一个开源项目 用Hexo的方式管理WordPress(使用Github Actions自动更新文章到WordPress)：https://github.com/zhaoolee/WordPressXMLRPCTools

## WordPress免费插件推荐列表

| 插件名称 | 功能简介 | 下载页面 |
| --- | --- | --- |
| POST VIEWS COUNTER | 查看文章阅读量 | http://www.dfactory.eu/plugins/post-views-counter/ |
| WP Super Cache | 对WordPress页面进行静态页缓存 | https://wordpress.org/plugins/wp-super-cache/ |
| instant.page | 用户鼠标滑到超链接时, 预加载网页 | https://wordpress.org/plugins/instant-page/ |
| AI Services | 提供AI审核功能的API连接 | https://wordpress.org/plugins/ai-services/ |

## 开发小技巧

将开发的主题软连接到WordPress Theme目录：
```bash
ln -s /path/to/your/theme /path/to/wordpress/wp-content/themes/your-theme
```

## 常见问题

1. 注册邮件未收到
   - 检查邮件发送配置
   - 检查垃圾邮件文件夹
   - 尝试使用其他邮箱注册

2. 评论 Markdown 不生效
   - 确保主题 JS 文件正确加载
   - 清除浏览器缓存
   - 检查是否有 JS 错误

3. 用户中心访问提示需要登录
   - 检查是否已登录
   - 清除浏览器 Cookie
   - 重新登录

4. 文章标签页加载问题
   - 检查缓存设置是否合理
   - 确认RSS短代码格式正确
   - 清除浏览器缓存和主题缓存

5. AI审核功能不工作
   - 确认AI Services插件已安装并启用
   - 检查API密钥是否配置正确
   - 确认审核设置已正确保存
   - 查看WordPress错误日志获取详细信息

## 致谢

感谢 [@zhaoolee](https://github.com/zhaoolee) 开发的原始主题，本主题在其基础上添加了用户系统等功能。
感谢 WordPress 团队开发的 [AI Services](https://wordpress.org/plugins/ai-services/) 插件，为主题提供了AI功能支持。

## 许可证

遵循原项目的开源协议.